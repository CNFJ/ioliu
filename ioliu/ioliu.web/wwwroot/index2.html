
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<h1>父页面</h1>
	<!-- 由于另一个域名已挂，转移页面到同域，看代码就行 -->
	<iframe src="./index1.html" id='myframe' name="myframe" allowTransparency="true" scrolling="no" width="100%" height="100%" frameborder="0"></iframe>
	<script src="https://js.3conline.com/min/temp/v1/lib-jquery1.10.2.js"></script>
	<script src="http://caibaojian.com/demo/2018/8/json2.js"></script>
	<!-- <script src="xdomain.js"></script> -->
	<script type="text/javascript">
		var iframe = document.getElementById('myframe');
			(function(win, doc){
				var ifr = win.parent;

				var cb = function(json){
					iframe.height = json + 'px'; 
				};
				var sendMessage = function(){
					if(win.postMessage){
						if (win.addEventListener) {
							win.addEventListener("message",function(e){
								cb.call(win,e.data);
							},false);
						}else if(win.attachEvent) {
							win.attachEvent("onmessage",function(e){
								cb.call(win,e.data);
							});
						}

						return function(data){
							ifr.postMessage(data,'*');
						};
					}else{
						var hash = '';

						setInterval(function(){
							if(win.name!==hash){
								hash = win.name;
								cb.call(win,hash);
							}
						},50);
						return function(data){
							ifr.name = data;
						};
					}
				}
				win.sendMessage = sendMessage();
			})(window, document);

		
	</script>
</body>

</html>